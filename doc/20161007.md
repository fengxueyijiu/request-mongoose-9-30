![](https://avatars0.githubusercontent.com/u/72467)
# mongodb 数据库操作

###  开启mongo shell
```js
$mongo

```
### 创建一个数据库
```
$use digicity-express-api

```
数据库是mongodb 中的顶级存储单位，之下一级是 **集合**
### 创建一个集合
```
$db.createCollection('posts')

```
### 插入数据记录
一个集合（例如，posts ），里面可以插入多个数据记录
```
$ db.posts.insert({title:"myTitle",content:"myContent"})

```
### 查看集合中的所有记录
```
$ db.posts.find()

```
![ada](https://github.com/fengxueyijiu/request-mongoose-9-30/blob/master/doc/img/001-ada.png?raw=true)

### 修改一条记录（了解内容）
```
db.posts.update({_id: ObjectId('xxx')}, {$set: {title: 'mongodb'}})

```
### 删除一条记录
```
db.posts.remove({_id: ObjectId('xxx')})

```
###删除posts集合所有记录
```
db.posts.remove({})
```
### 删除数据库
假设我们的数据库叫做 digicity-express-api

 ```
 use digicity-express-api
 db.dropDatabase()
 ```
 ### 删除集合
 ```
 db.posts.drop()   删掉集合posts

 ```
### 为什么记录电子版笔记
```
第一个原因，使用markdown 格式美观
第二个原因，便与更新
第三个原因，有git/github 控制，永远不会丢失
第四个原因，便于搜索
```
# 用js代码操作 mongodb
```
我们主要基于一个js库的帮助，
![mongoose](http://mongoosejs.com)，他可以一个npm的包来安装。

解释一下，一个 ** js库**,就是一组**js 接口*的集合。英文对应：library
```
![](https://github.com/happypeter/digicity-express-api/blob/master/doc/img/002-mongoose.png?raw=true)
### `js`代码<————`mongose`————>`mongodb`

### 先写一个最简单的 express 程序


 index.js 如下：

 ```
 var express = require('express');
 var app = express();

 app.post('/posts', function(req, res){
   console.log('hello');
 });

 app.listen(3000, function(){
   console.log('running on port 3000.....');
 });
 ```

 相应的 curl 测试命令是

 ```
 curl --request POST localhost:3000/posts
 ```

 如果可以在运行 `node index.js` 的位置看到 `hello` 表示我们这一步胜利完成。

 ### 安装mongoose
 作为一个npm包进行安装，【link](https://www.npmjs.com/package/mongoose)
 ```
 npm install --save mongoose

 ```
 ###  在js代码中导入mongoose
 ###  进行数据库的连接
 ###  定义数据的概要Schema
 ###  创建数据模型 model
 ###  实例化model得到数据对象
 ###  对象之上呼叫save()

 这样可以把保存到数据库中


 ![]()
